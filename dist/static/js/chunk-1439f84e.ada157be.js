(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1439f84e"],{"248e":function(e,t,n){},3043:function(e,t,n){"use strict";n("d7a1")},"497ad":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-row",[n("div",{staticClass:"wrapper"},[n("el-button",{attrs:{type:"primary"},nativeOn:{click:function(t){return t.preventDefault(),e.submit(t)}}},[e._v("确认路径")]),n("div",[n("span",{staticClass:"key"},[e._v("实际金额:"+e._s(this.factMoney))]),n("span",{staticClass:"key"},[e._v("预计金额:"+e._s(this.yujiMoney))]),(this.templateData.money-this.factMoney)/this.templateData.money<=.2?n("span",{staticClass:"key",style:{color:"red"}},[n("i",{staticClass:"el-icon-warning"}),e._v(" 离DRG分组设置的金额"+e._s(this.templateData.money)+"只有20%差距 ")]):e._e()])],1)]),n("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},[n("el-collapse-item",{attrs:{title:"主要诊疗工作",name:"1"}},[[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate0},on:{change:e.handleCheckAllChange0},model:{value:e.checkAll0,callback:function(t){e.checkAll0=t},expression:"checkAll0"}},[e._v("全选")]),n("div",{staticStyle:{margin:"15px 0"}}),n("el-checkbox-group",{on:{change:e.handleCheckedworkChange0},model:{value:e.checkedCities.work1,callback:function(t){e.$set(e.checkedCities,"work1",t)},expression:"checkedCities.work1"}},[e._l(this.nowInfo.work1,(function(e){return n("el-checkbox",{key:e.label,attrs:{label:e.label}},[n("check-item",{attrs:{item:e}})],1)})),e.isErrorStatus?n("div",{staticClass:"icon-wrapper",on:{click:function(t){return e.addItem(0)}}},[n("i",{staticClass:"el-icon-circle-plus-outline"}),n("span",[e._v("新增")])]):e._e()],2)]],2),n("el-collapse-item",{attrs:{title:"长期医嘱",name:"2"}},[[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate1},on:{change:e.handleCheckAllChange1},model:{value:e.checkAll1,callback:function(t){e.checkAll1=t},expression:"checkAll1"}},[e._v("全选")]),n("div",{staticStyle:{margin:"15px 0"}}),n("el-checkbox-group",{on:{change:e.handleCheckedworkChange1},model:{value:e.checkedCities.work2,callback:function(t){e.$set(e.checkedCities,"work2",t)},expression:"checkedCities.work2"}},[e._l(this.nowInfo.work2,(function(e){return n("el-checkbox",{key:e.label,attrs:{label:e.label}},[n("check-item",{attrs:{item:e}})],1)})),e.isErrorStatus?n("div",{staticClass:"icon-wrapper"},[n("i",{staticClass:"el-icon-circle-plus-outline"}),n("span",{on:{click:function(t){return e.addItem(1)}}},[e._v("新增")])]):e._e()],2)]],2),n("el-collapse-item",{attrs:{title:"临时医嘱",name:"3"}},[[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate2},on:{change:e.handleCheckAllChange2},model:{value:e.checkAll2,callback:function(t){e.checkAll2=t},expression:"checkAll2"}},[e._v("全选")]),n("div",{staticStyle:{margin:"15px 0"}}),n("el-checkbox-group",{on:{change:e.handleCheckedworkChange2},model:{value:e.checkedCities.work3,callback:function(t){e.$set(e.checkedCities,"work3",t)},expression:"checkedCities.work3"}},[e._l(this.nowInfo.work3,(function(e){return n("el-checkbox",{key:e.label,attrs:{label:e.label}},[n("check-item",{attrs:{item:e}})],1)})),e.isErrorStatus?n("div",{staticClass:"icon-wrapper"},[n("i",{staticClass:"el-icon-circle-plus-outline"}),n("span",{on:{click:function(t){return e.addItem(2)}}},[e._v("新增")])]):e._e()],2)]],2),n("el-collapse-item",{attrs:{title:"主要护理工作",name:"4"}},[[n("el-checkbox",{attrs:{indeterminate:e.isIndeterminate3},on:{change:e.handleCheckAllChange3},model:{value:e.checkAll3,callback:function(t){e.checkAll3=t},expression:"checkAll3"}},[e._v("全选")]),n("div",{staticStyle:{margin:"15px 0"}}),n("el-checkbox-group",{on:{change:e.handleCheckedworkChange3},model:{value:e.checkedCities.work4,callback:function(t){e.$set(e.checkedCities,"work4",t)},expression:"checkedCities.work4"}},[e._l(this.nowInfo.work4,(function(e){return n("el-checkbox",{key:e.label,attrs:{label:e.label}},[n("check-item",{attrs:{item:e}})],1)})),e.isErrorStatus?n("div",{staticClass:"icon-wrapper"},[n("i",{staticClass:"el-icon-circle-plus-outline"}),n("span",{on:{click:function(t){return e.addItem(3)}}},[e._v("新增")])]):e._e()],2)]],2)],1),n("el-drawer",{attrs:{title:"新增选项",visible:e.dialogItem,direction:"rtl"},on:{"update:visible":function(t){e.dialogItem=t}}},[n("el-form",{attrs:{"label-width":"90px"}},[n("el-form-item",{attrs:{label:"内容"}},[n("el-input",{attrs:{autosize:"",placeholder:"选项内容"},model:{value:e.itemMessage,callback:function(t){e.itemMessage=t},expression:"itemMessage"}})],1),n("el-form-item",{attrs:{label:"金额"}},[n("el-input",{attrs:{autosize:"",placeholder:"0"},model:{value:e.itemMoney,callback:function(t){e.itemMoney=t},expression:"itemMoney"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.addItemMessage}},[e._v("确定")])],1)],1)],1)],1)},a=[],o=n("5530"),c=(n("d81d"),n("159b"),n("8688")),s=n.n(c),r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"checkItem"},[n("span",[e._v(e._s(e.item.label))]),e.item.money?n("span",{staticClass:"money"},[e._v("$"+e._s(e.item.money))]):e._e(),e.item.count?n("span",{staticClass:"count",on:{click:function(t){e.drawer2=!0}}},[e._v("剂量")]):e._e(),e.item.write?n("span",{staticClass:"write",on:{click:function(t){e.drawer1=!0}}},[e._v("填写")]):e._e(),e.item.write?n("el-drawer",{attrs:{title:"其他医嘱",visible:e.drawer1,direction:"rtl"},on:{"update:visible":function(t){e.drawer1=t}}},[n("el-form",{attrs:{"label-width":"20px"}},[n("el-form-item",[n("el-input",{staticStyle:{width:"96%"},attrs:{placeholder:"请输入医嘱内容",type:"textarea",autosize:""},model:{value:e.otherDetail,callback:function(t){e.otherDetail=t},expression:"otherDetail"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"}},[e._v("确定")])],1)],1)],1):e._e(),e.item.count?n("el-drawer",{attrs:{title:e.item.label,visible:e.drawer2,direction:"rtl"},on:{"update:visible":function(t){e.drawer2=t}}},[n("el-form",{attrs:{"label-width":"20px"}},[n("el-form-item",{attrs:{label:""}},[n("el-row",[n("el-input-number",{attrs:{min:375,max:500,placeholder:"375",label:"描述文字"},model:{value:e.count,callback:function(t){e.count=t},expression:"count"}}),n("span",[e._v("mg/(m^2*d)")])],1),n("el-row",[n("div",{staticStyle:{margin:"15px 0"}})]),n("el-row",[n("el-input-number",{attrs:{min:1,max:5,placeholder:"1",label:"描述文字"},model:{value:e.days,callback:function(t){e.days=t},expression:"days"}}),n("span",[e._v("天")])],1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary"}},[e._v("确定")])],1)],1)],1):e._e()],1)},l=[],h={props:{item:Object},data:function(){return{otherDetail:"",drawer1:!1,drawer2:!1,count:375,days:1}}},u=h,m=(n("3043"),n("2877")),d=Object(m["a"])(u,r,l,!1,null,"176b6960",null),k=d.exports,f={components:{checkItem:k},computed:{isErrorStatus:function(){return this.$store.state.template.errorStatus},templateData:function(){return s()(this.$store.state.template.template)},originMoney:function(){var e=0,t=JSON.parse(localStorage.getItem("moneyArray"))||[0,0,0,0];return e=this.stateIndex-1>=0?t[this.stateIndex-1]:0,e}},data:function(){return{stateIndex:0,addIndex:0,dialogItem:!1,itemMessage:"",itemMoney:0,calcMoney:"2462",yujiMoney:2462,factMoney:0,checkAll0:!1,checkAll1:!1,checkAll2:!1,checkAll3:!1,nowInfo:{work1:[],work2:[],work3:[],work4:[]},checkedCities:{work1:[],work2:[],work3:[],work4:[]},isIndeterminate0:!0,isIndeterminate1:!0,isIndeterminate2:!0,isIndeterminate3:!0,activeNames:["1","2","3","4"]}},created:function(){var e=this;this.$route.query.id||this.$route.query.where||this.$alert("请先在路径总览进行操作！","提示",{confirmButtonText:"前往路径总览",callback:function(t){e.$router.push({path:"/Path/Overall"})}})},methods:{addItemMessage:function(){this.nowInfo["work".concat(this.addIndex+1)].push({label:this.itemMessage,money:+this.itemMoney,isNew:!0});var e=s()(this.$store.state.template.template.info);e[this.stateIndex]=this.nowInfo;var t=Object(o["a"])(Object(o["a"])({},this.$store.state.template.template),{},{info:e});this.$store.commit("template/changeTemplate",t),this.calcMap(),this.dialogItem=!1},addItem:function(e){this.dialogItem=!0,this.addIndex=e},handleCheckAllChange0:function(e){this.checkedCities.work1=e?this.nowInfo.work1.map((function(e){return e.label})):[],console.log("checkedCities",this.checkedCities),this.isIndeterminate0=!1},handleCheckAllChange1:function(e){this.checkedCities.work2=e?this.nowInfo.work2.map((function(e){return e.label})):[],this.isIndeterminate1=!1},handleCheckAllChange2:function(e){this.checkedCities.work3=e?this.nowInfo.work3.map((function(e){return e.label})):[],this.isIndeterminate2=!1},handleCheckAllChange3:function(e){this.checkedCities.work4=e?this.nowInfo.wrok4.map((function(e){return e.label})):[],this.isIndeterminate=!1},calcMoneyAgain:function(e,t){var n=this,i=0;console.log("this.map1",this.map1),this.checkedCities.work1.forEach((function(e){i+=n.map1[e].money})),this.checkedCities.work2.forEach((function(e){i+=n.map2[e].money})),this.checkedCities.work3.forEach((function(e){i+=n.map3[e].money})),this.checkedCities.work4.forEach((function(e){i+=n.map4[e].money})),this.factMoney=this.originMoney+i},handleCheckedworkChange0:function(e){var t=e.length;this.checkAll0=t===this.nowInfo.work1.length,this.isIndeterminate3=t>0&&t<this.nowInfo.work1.length,console.log(" this.calcMoney",this.calcMoney),this.calcMoneyAgain(e,this.nowInfo.work1)},handleCheckedworkChange1:function(e){var t=e.length;this.checkAll1=t===this.nowInfo.work2.length,this.isIndeterminate3=t>0&&t<this.nowInfo.work2.length,this.calcMoneyAgain(e,this.nowInfo.work2)},handleCheckedworkChange2:function(e){var t=e.length;this.checkAll2=t===this.nowInfo.work3.length,this.isIndeterminate3=t>0&&t<this.nowInfo.work3.length,this.calcMoneyAgain(e,this.nowInfo.work3)},handleCheckedworkChange3:function(e){var t=e.length;this.checkAll3=t===this.nowInfo.work4.length,this.isIndeterminate3=t>0&&t<this.nowInfo.work4.length,this.calcMoneyAgain(e,this.nowInfo.work4)},submit:function(){var e=this;this.$store.commit("template/changeMoney",this.factMoney);var t=JSON.parse(localStorage.getItem("moneyArray"))||[0,0,0,0];t[this.stateIndex]=this.factMoney,localStorage.setItem("moneyArray",JSON.stringify(t));var n=JSON.parse(localStorage.getItem("stageMessageArray"))||[];n[this.stateIndex]={work1:this.checkedCities.work1.map((function(t){return e.map1[t]})),work2:this.checkedCities.work2.map((function(t){return e.map2[t]})),work3:this.checkedCities.work3.map((function(t){return e.map3[t]})),work4:this.checkedCities.work4.map((function(t){return e.map4[t]}))},localStorage.setItem("storeageMessageArray",JSON.stringify(n)),this.$router.back()},initData:function(){var e=JSON.parse(localStorage.getItem("storeageMessageArray"))||[],t=e[this.stateIndex]||{work1:[],work2:[],work3:[],work4:[]};this.checkedCities={work1:t.work1.map((function(e){return e.label})),work2:t.work2.map((function(e){return e.label})),work3:t.work3.map((function(e){return e.label})),work4:t.work4.map((function(e){return e.label}))},console.log("this.checkedCities ",this.checkedCities),this.nowInfo=s()(this.$store.state.template.template.info[this.stateIndex])},calcMap:function(){var e=this;this.map1={},this.nowInfo.work1.forEach((function(t){e.map1[t.label]=t})),this.map2={},this.nowInfo.work2.forEach((function(t){e.map2[t.label]=t})),this.map3={},this.nowInfo.work3.forEach((function(t){e.map3[t.label]=t})),this.map4={},this.nowInfo.work4.forEach((function(t){e.map4[t.label]=t}))}},mounted:function(){var e=this.$route.query,t=e.index;e.id,e.where;console.log("index",t),this.stateIndex=+t,document.title="第".concat(+t+1,"阶段"),this.$route.meta.title="第".concat(+t+1,"阶段"),this.factMoney=this.originMoney,this.yujiMoney=this.factMoney+200*(6-this.stateIndex)+Math.floor(20*Math.random()),this.initData(),this.calcMap(),this.calcMoneyAgain()},watch:{stateIndex:function(e,t){console.log("newVal",e),this.nowInfo=s()(this.$store.state.template.template.info[e])},factMoney:function(e,t){this.yujiMoney=e+200*(6-this.stateIndex)+Math.floor(20*Math.random())}}},p=f,w=(n("b74d"),Object(m["a"])(p,i,a,!1,null,"e4487a18",null));t["default"]=w.exports},"6da6":function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Map,a=n.get(e);if(a)return a;if(Array.isArray(e)){var o=[];n.set(e,o);for(var c=0;c<e.length;c++)o[c]=i(e[c],t,n);return o}if(e instanceof Date)return new Date(e.valueOf());if(!(e instanceof Object))return e;var s={};n.set(e,s);for(var r=Object.keys(e),l=0;l<r.length;l++){var h=t?t(r[l]):r[l];s[h]=i(e[r[l]],t,n)}return s}function a(e){return function(t){return i(t,e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,t.formatKeys=a,i.formatKeys=a},8688:function(e,t,n){e.exports=n("6da6").default},b74d:function(e,t,n){"use strict";n("248e")},d7a1:function(e,t,n){}}]);